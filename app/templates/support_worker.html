{% extends "base.html" %}

{% block content %}
<div class="flex min-h-screen">
  <!-- Sidebar -->
  <aside class="w-64 bg-gray-100 p-6 border-r">
    <h2 class="text-xl font-bold mb-6">Support Worker</h2>
    <ul id="sidebarLinks" class="space-y-4 text-gray-700">
      <li><a href="#profile" class="sidebar-link text-indigo-700 font-semibold">Profile</a></li>
      <li><a href="#schedule" class="sidebar-link hover:underline">Today's Schedule</a></li>
      <li><a href="#daily-report" class="sidebar-link hover:underline">Daily Patient Report</a></li>
      <li><a href="#history" class="sidebar-link hover:underline">Patient Report History</a></li>
      <li><a href="#analysis" class="sidebar-link hover:underline">Data Analysis</a></li>
      <li><a href="#medical" class="sidebar-link hover:underline">Medical Orders & Guardian Requests</a></li>
      <li><a href="#weekly-overview" class="sidebar-link hover:underline">Weekly Overview (Optional)</a></li>
    </ul>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-8">
    <!-- Profile Section -->
    <section id="profile" class="content-section space-y-6">
      <!-- Profile Card -->
      <div class="bg-white rounded-lg shadow p-6 relative hover:shadow-lg transition-shadow duration-300">
        <h3 class="text-xl font-bold mb-4">Profile</h3>
        <div class="flex items-center gap-8 mb-6">
          <div class="w-40 h-40">
            <img src="{{ url_for('static', filename='images/support_worker_avatar.jpg') }}" 
                 alt="Support Worker Photo" 
                 class="w-full h-full object-cover rounded-full border-4 border-indigo-500">
          </div>
          <div class="grid grid-cols-1 gap-4">
            <div>
                <p class="text-gray-600">Name: <span class="text-gray-800">Wang Xiaoming</span></p>
                <p class="text-gray-600">Email: <span class="text-gray-800">support@example.com</span></p>
                <p class="text-gray-600">Contact: <span class="text-gray-800">0912-345-678</span></p>
            </div>
          </div>
          <p class="absolute bottom-0 right-0 p-6 text-xs text-gray-500">Account Created：2024-03-15</p>
        </div>
      </div>

      <!-- Education Card -->
      <div class="bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow duration-300">
        <h3 class="text-xl font-bold mb-4">Education</h3>
        <ul class="list-disc list-inside text-gray-600 space-y-2">
            <li>2018 - Bachelor's in Nursing, Taipei Nursing University</li>
            <li>2020 - Caregiver Certification</li>
        </ul>
      </div>

      <!-- Work Experience Card -->
      <div class="bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow duration-300">
        <h3 class="text-xl font-bold mb-4">Work Experience</h3>
        <ul class="list-disc list-inside text-gray-600 space-y-2">
            <li>2020–2022 Caregiver at Taipei Hospital</li>
            <li>2022–Present Home Caregiver</li>
        </ul>
      </div>
    </section>

    <!-- Today's Schedule Section -->
    <section id="schedule" class="content-section hidden">
      <div class="bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow duration-300">
        <h3 class="text-xl font-bold mb-4">Today's Patient Info</h3>
        <div class="flex gap-8">
          <div class="w-48 h-48">
            <img src="{{ url_for('static', filename='images/patient_photo.jpg') }}" 
                 alt="Patient Photo" 
                 class="w-full h-full object-cover rounded-lg border-4 border-indigo-500">
          </div>
          <div class="flex-1 space-y-4">
            <div class="border-b pb-4">
              <h4 class="font-semibold mb-2">Basic Information</h4>
              <p class="text-gray-600">Patient Name: <span class="text-gray-800">Li Dahua/span></p>
              <p class="text-gray-600">Patient ID:<span class="text-gray-800">PT20240315001</span></p>
              <p class="text-gray-600">Health Card No.:<span class="text-gray-800">A123456789</span></p>
            </div>
          </div>
        </div>

        <!-- Today's Tasks Card -->
        <div class="mt-6 bg-gray-50 rounded-lg p-6 hover:shadow-lg transition-shadow duration-300">
          <h4 class="font-semibold mb-4">Today's Tasks</h4>
          <ul class="space-y-2">
            <li class="flex items-center gap-2">
              <span class="w-2 h-2 bg-green-500 rounded-full"></span>
              <span>9:00 AM - Medication Assistance</span>
            </li>
            <li class="flex items-center gap-2">
              <span class="w-2 h-2 bg-green-500 rounded-full"></span>
              <span>10:30 AM - Rehabilitation Exercises</span>
            </li>
            <li class="flex items-center gap-2">
              <span class="w-2 h-2 bg-green-500 rounded-full"></span>
              <span>2:00 PM - Vital Sign Monitoring</span>
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Daily Patient Report Section -->
    <section id="daily-report" class="content-section hidden">
      <div class="max-w-5xl mx-auto bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow duration-300">
        <h3 class="text-xl font-bold mb-6">Daily Patient Report</h3>

        <!-- Basic Info - 2-column grid -->
        <div class="grid grid-cols-2 gap-6 mb-8">
          <div class="flex items-center">
            <span class="text-gray-700 font-medium min-w-32">Report Date:</span>
            <span class="text-gray-900">2024-03-15</span>
          </div>
          <div class="flex items-center">
            <span class="text-gray-700 font-medium min-w-32">Patient Name:</span>
            <span class="text-gray-900">Li Dahua</span>
          </div>
        </div>

        <!-- Questionnaire Table - Adjust Alignment -->
        <div class="overflow-hidden rounded-lg border border-gray-200">
          <div class="max-h-[800px] overflow-y-auto">
            <table class="w-full border-collapse">
              <thead class="sticky top-0 bg-white">
                <tr class="bg-gray-100">
                  <th class="w-24 border-b border-gray-200 px-6 py-4 text-sm font-semibold text-gray-800 text-center">題號</th>
                  <th class="max-w-xl border-b border-gray-200 px-6 py-4 text-sm font-semibold text-gray-800 text-left">題目</th>
                  <th class="w-48 border-b border-gray-200 px-6 py-4 text-sm font-semibold text-gray-800 text-center">回答</th>
                </tr>
              </thead>
              <tbody>
                <!-- 1. Mental State -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">1</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">How is the patient’s mental state today?</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
                <!-- 2. Medication Compliance -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">2</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Did the patient take medication on time?</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
               <!-- 3. Eating Condition -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">3</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Eating condition score</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
               <!-- 4. Rehabilitation Activity -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">4</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Did they complete rehab today?</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Yes</option>
                        <option>No</option>
                    </select>
                  </td>
                </tr>
                <!-- 5. Sleep Quality -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">5</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Sleep quality score</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
                <!-- 6. Abnormal Symptoms -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">6</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Any abnormal symptoms?</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Yes</option>
                        <option>No</option>
                    </select>
                  </td>
                </tr>
                <!-- 7. Emotional Stability -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">7</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Emotional stability score</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
                <!-- 8. Following Medical Advice -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">8</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Followed doctor’s orders?</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Yes</option>
                        <option>No</option>
                    </select>
                  </td>
                </tr>
                <!-- 9. Activity Participation -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">9</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Participation score</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
                <!-- 10. Social Interaction -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">10</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Any social interaction?</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Yes</option>
                        <option>No</option>
                    </select>
                  </td>
                </tr>
                <!-- 11. Communication Ability -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">11</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Communication ability rating</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
                <!-- 12. Hydration -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">12</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Has the patient consumed enough water?</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Yes</option>
                        <option>No</option>
                    </select>
                  </td>
                </tr>
                <!-- 13. Personal Hygiene -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">13</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Personal hygiene rating</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
                <!-- 14. Pain Level -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">14</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Is the patient experiencing any pain or discomfort?</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Yes</option>
                        <option>No</option>
                    </select>
                  </td>
                </tr>
                <!-- 15. Cognitive Ability -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">15</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Cognitive ability rating</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
                <!-- 16. Family Interaction -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">16</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Is there positive interaction with family members?</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Yes</option>
                        <option>No</option>
                    </select>
                  </td>
                </tr>
                <!-- 17. Exercise Cooperation -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">17</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Exercise cooperation rating</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
                <!-- 18. Environmental Adaptation -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">18</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Environmental adaptability rating</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
                <!-- 19. Self-care Ability -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">19</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Self-care ability rating</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
                <!-- 20. Treatment Cooperation -->
                <tr class="hover:bg-gray-50 transition-colors duration-150">
                  <td class="border-b border-gray-200 px-6 py-4 text-center text-gray-600">20</td>
                  <td class="border-b border-gray-200 px-6 py-4 text-left font-medium text-gray-800 max-w-xl truncate">Treatment cooperation rating</td>
                  <td class="border-b border-gray-200 px-6 py-4">
                    <select class="w-full h-10 border rounded-md px-4 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center">
                        <option value="" disabled selected>Please select</option>
                        <option>Poor</option>
                        <option>Average</option>
                        <option>Good</option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="mt-6 flex justify-end">
          <button class="bg-indigo-600 text-white px-6 py-2 rounded-md hover:bg-indigo-700 transition-colors">
            Submit Report
          </button>
        </div>
      </div>
    </section>

    <!-- Patient Condition History Section -->
    <section id="history" class="content-section hidden">
      <!-- Main Card - keep hover effect -->
      <div class="max-w-5xl mx-auto bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow duration-300">
        <h3 class="text-xl font-bold mb-6">Report Records</h3>
        
        <!-- Info Fields - no hover effect -->
        <div class="grid grid-cols-2 gap-6 mb-8">
          <div class="bg-gray-50 rounded-lg p-4">
            <div class="flex justify-between items-center mb-3">
              <span class="font-medium text-gray-700">Report Date:</span>
              <input type="date" 
                     id="reportDate"
                     class="border rounded-md px-3 py-1.5 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
            <div class="flex justify-between items-center">
              <span class="font-medium text-gray-700">Support Worker：</span>
              <span id="supportWorkerName" class="text-gray-900 font-medium">Chen Xiaoming</span>
            </div>
          </div>
          <div class="bg-gray-50 rounded-lg p-4">
            <div class="flex justify-between items-center">
              <span class="font-medium text-gray-700">Patient Name:</span>
              <select id="patientSelect" 
                      class="border rounded-md px-3 py-1.5 bg-white w-48 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                <option value="李大華">Li Dahua</option>
                <option value="張小明">Zhang Xiaoming</option>
                <option value="王大明">Wang Daming</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Report Table -->
        <div class="overflow-hidden rounded-lg border border-gray-200">
          <table class="w-full border-collapse">
            <thead>
              <tr class="bg-gray-100">
                <th class="w-12 border-b border-gray-200 px-4 py-3 text-sm font-semibold text-gray-800 text-center">題號</th>
                <th class="border-b border-gray-200 px-4 py-3 text-sm font-semibold text-gray-800 text-left">題目</th>
                <th class="w-48 border-b border-gray-200 px-4 py-3 text-sm font-semibold text-gray-800 text-center">回答</th>
              </tr>
            </thead>
            <tbody id="reportTableBody">
              <!-- Dynamically generated table content -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Data Analysis Section -->
    <section id="analysis" class="content-section hidden">
      <div class="bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow duration-300">
        <h3 class="text-xl font-bold mb-4">Data Analysis</h3>
        <div class="grid grid-cols-2 gap-6">
          <div>
            <h4 class="font-semibold mb-2">Weekly Chart</h4>
            <canvas id="weeklyChart" class="w-full"></canvas>
          </div>
      <div>
            <h4 class="font-semibold mb-2">Monthly Statistics</h4>
            <canvas id="monthlyChart" class="w-full"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Medical Instructions and Guardian Requirements Section -->
    <section id="medical" class="content-section hidden">
      <div class="bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow duration-300">
        <h3 class="text-xl font-bold mb-6">Medical Instructions & Guardian Requirements</h3>
        
        <!-- Medical Instructions -->
        <div class="mb-8">
          <h4 class="text-lg font-semibold mb-4">Medical Instructions</h4>
          <div class="bg-yellow-50 p-4 rounded border-l-4 border-yellow-400">
            <ul class="space-y-2">
              <li class="flex items-start">
                <span class="text-yellow-600 mr-2">•</span>
                <span>Blood pressure medication - once in the morning and evening, to be taken after meals</span>
              </li>
              <li class="flex items-start">
                <span class="text-yellow-600 mr-2">•</span>
                <span>Exercise - 30-minute walk daily with a companion</span>
              </li>
              <li class="flex items-start">
                <span class="text-yellow-600 mr-2">•</span>
                <span>Wound care - change dressing twice a day, keep the area clean</span>
              </li>
        </ul>
      </div>
        </div>

        <!-- Guardian Requirements -->
      <div>
          <h4 class="text-lg font-semibold mb-4">Guardian Requirements</h4>
          <div class="bg-blue-50 p-4 rounded border-l-4 border-blue-400">
            <p class="text-gray-700 mb-4">
                Special Notes:
            </p>
            <ul class="space-y-2">
              <li class="flex items-start">
                <span class="text-blue-600 mr-2">•</span>
                <span>Please pay special attention to the patient's eating habits and ensure meals are on time and balanced</span>
              </li>
              <li class="flex items-start">
                <span class="text-blue-600 mr-2">•</span>
                <span>The patient enjoys classical music; it's recommended to play music during afternoon rest</span>
              </li>
              <li class="flex items-start">
                <span class="text-blue-600 mr-2">•</span>
                <span>Regular assistance is needed with light stretching exercises</span>
              </li>
        </ul>
      </div>
        </div>
      </div>
    </section>

     <!-- Weekly Overview Section -->
    <section id="weekly-overview" class="content-section hidden">
      <div class="bg-white rounded-lg shadow p-6">
        <h3 class="text-xl font-bold mb-6">Weekly Overview</h3>
        
         <!-- Week Selector -->
        <div class="mb-6">
          <div class="flex items-center gap-4">
            <button class="text-gray-500 hover:text-gray-700">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
              </svg>
            </button>
            <span class="text-lg font-medium">Week 2 of March 2024</span>
            <button class="text-gray-500 hover:text-gray-700">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </button>
          </div>
        </div>

        <!-- Weekly Statistics -->
        <div class="grid grid-cols-3 gap-6 mb-8">
          <div class="bg-green-50 p-4 rounded-lg hover:shadow-lg transition-shadow duration-300">
            <h4 class="text-sm text-green-600 font-medium mb-2">Completed Care Sessions</h4>
            <p class="text-2xl font-bold text-green-700">15times</p>
            <p class="text-sm text-green-600 mt-1">+2 compared to last week</p>
          </div>
          <div class="bg-blue-50 p-4 rounded-lg hover:shadow-lg transition-shadow duration-300">
            <h4 class="text-sm text-blue-600 font-medium mb-2">Total Care Hours</h4>
            <p class="text-2xl font-bold text-blue-700">32 hours</p>
            <p class="text-sm text-blue-600 mt-1">+4 compared to last week</p>
          </div>
          <div class="bg-purple-50 p-4 rounded-lg hover:shadow-lg transition-shadow duration-300">
            <h4 class="text-sm text-purple-600 font-medium mb-2">Number of Patients Served</h4>
            <p class="text-2xl font-bold text-purple-700">4 patients</p>
            <p class="text-sm text-purple-600 mt-1">+1 compared to last week</p>
          </div>
        </div>

        <!-- Weekly Schedule Overview -->
        <div class="mb-8">
          <h4 class="text-lg font-semibold mb-4">Weekly Schedule</h4>
          <div class="bg-gray-50 rounded-lg p-4 hover:shadow-lg transition-shadow duration-300">
            <table class="w-full">
              <thead>
                <tr class="text-gray-500 text-sm">
                    <th class="py-2">Mon</th>
                    <th class="py-2">Tue</th>
                    <th class="py-2">Wed</th>
                    <th class="py-2">Thu</th>
                    <th class="py-2">Fri</th>
                    <th class="py-2">Sat</th>
                    <th class="py-2">Sun</th>
                </tr>
              </thead>
              <tbody>
                <tr class="text-center">
                  <td class="p-2">
                    <div class="bg-green-100 text-green-700 rounded p-2">
                      Morning Shift<br>2 care sessions
                    </div>
                  </td>
                  <td class="p-2">
                    <div class="bg-yellow-100 text-yellow-700 rounded p-2">
                      Afternoon Shift<br>3 care sessions
                    </div>
                  </td>
                  <td class="p-2">
                    <div class="bg-green-100 text-green-700 rounded p-2">
                      Morning Shift<br>2 care sessions
                    </div>
                  </td>
                  <td class="p-2">
                    <div class="bg-red-100 text-red-700 rounded p-2">
                      Day Off
                    </div>
                  </td>
                  <td class="p-2">
                    <div class="bg-yellow-100 text-yellow-700 rounded p-2">
                      Afternoon Shift<br>2 care sessions
                    </div>
                  </td>
                  <td class="p-2">
                    <div class="bg-green-100 text-green-700 rounded p-2">
                      Morning Shift<br>3 care sessions
                    </div>
                  </td>
                  <td class="p-2">
                    <div class="bg-red-100 text-red-700 rounded p-2">
                      Day Off
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Weekly Performance Analysis -->
      <div>
          <h4 class="text-lg font-semibold mb-4">Performance Analysis</h4>
          <div class="grid grid-cols-2 gap-6">
            <div class="bg-gray-50 p-4 rounded-lg hover:shadow-lg transition-shadow duration-300">
              <h5 class="text-sm font-medium text-gray-600 mb-3">Care Rating Distribution</h5>
              <canvas id="weeklyRatingChart" class="w-full h-48"></canvas>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg hover:shadow-lg transition-shadow duration-300">
              <h5 class="text-sm font-medium text-gray-600 mb-3">Working Hours Distribution</h5>
              <canvas id="weeklyHoursChart" class="w-full h-48"></canvas>
            </div>
        </div>
      </div>
    </div>
    </section>
  </main>
</div>

<script>
  // 導航功能
  document.addEventListener('DOMContentLoaded', function () {
    const links = document.querySelectorAll('.sidebar-link');
    const sections = document.querySelectorAll('main section');

    links.forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').substring(1);

        sections.forEach(section => {
          section.classList.add('hidden');
          if (section.id === targetId) {
            section.classList.remove('hidden');
          }
        });

        links.forEach(l => l.classList.remove('text-indigo-700', 'font-semibold'));
        this.classList.add('text-indigo-700', 'font-semibold');
      });
    });
  });

  // 設置預設日期為今天
  document.addEventListener('DOMContentLoaded', function() {
    const today = new Date().toISOString().split('T')[0];
    document.querySelectorAll('input[type="date"]').forEach(input => {
      input.value = today;
    });
  });

  // 定義問題列表
  const questions = [
      "How is the patient's mental condition today?",
      "Did the patient take their medication on time?",
      "Meal intake rating",
      "Did the patient complete today’s rehab activities?",
      "Sleep quality rating",
      "Any abnormal symptoms?",
      "Emotional stability rating",
      "Did the patient follow medical instructions?",
      "Activity participation rating",
      "Any social interaction?"
  ];

  // 定義可用的 Support Worker 列表
  const supportWorkers = ["Chen Xiaoming", "Wang Xiaohua", "Lin Meiling", "Zhang Zhiming"];

  // 使用日期和病患名作為 key 來確保同一天同一個病患對應到同一個 Support Worker
  function getConsistentSupportWorker(date, patient) {
      const seed = date + patient;
      let hash = 0;
      for (let i = 0; i < seed.length; i++) {
          hash = ((hash << 5) - hash) + seed.charCodeAt(i);
          hash = hash & hash;
      }
      return supportWorkers[Math.abs(hash) % supportWorkers.length];
  }

  // 修改生成答案的部分
  function generateDailyAnswers(date, patient) {
      // 評分對應設定
      const ratings = {
          1: { text: "Poor", class: "text-red-500" },
          3: { text: "Average", class: "text-yellow-600" },
          5: { text: "Good", class: "text-green-600" }
      };

      // 生成評分答案
      function getRandomScore() {
          const scores = [1, 3, 5];
          const score = scores[Math.floor(Math.random() * 3)];
          return { 
              score: score.toString(),
              text: ratings[score].text,
              class: ratings[score].class
          };
      }

      return [
          // 精神狀況
          getRandomScore(),
          // 服藥
          formatYesNoAnswer(Math.random() < 0.7),
          // 進食狀況
          getRandomScore(),
          // 復健活動
          formatYesNoAnswer(Math.random() < 0.6),
          // 睡眠品質
          getRandomScore(),
          // 異常症狀
          formatYesNoAnswer(Math.random() > 0.8),
          // 情緒穩定
          getRandomScore(),
          // 遵醫囑
          formatYesNoAnswer(Math.random() < 0.75),
          // 活動參與
          getRandomScore(),
          // 社交互動
          formatYesNoAnswer(Math.random() < 0.65)
      ];
  }

  // 格式化是否答案
  function formatYesNoAnswer(isYes) {
      return { 
        score: isYes ? "Yes" : "No",
          text: isYes ? "Yes" : "No",
          class: isYes ? "text-green-600" : "text-red-500"
      };
  }

  // 生成 2025 年 4 月的所有日期資料
  const mockData = {
      "李大華": {},
      "張小明": {},
      "王大明": {}
  };

  // 生成所有日期的資料
  for (let day = 1; day <= 30; day++) {
      const date = `2025-04-${day.toString().padStart(2, '0')}`;
      
      ["Li Dahua", "Zhang Xiaoming", "Wang Daming"].forEach(patient => {
          mockData[patient][date] = {
              supportWorker: getConsistentSupportWorker(date, patient),
              answers: generateDailyAnswers(date, patient)
          };
      });
  }

  // 更新表格內容的渲染函數
  function updateReport() {
      const date = document.querySelector('#reportDate').value;
      const patient = document.querySelector('#patientSelect').value;
      
      if (mockData[patient] && mockData[patient][date]) {
          const data = mockData[patient][date];
          
          // 更新 Support Worker
          document.querySelector('#supportWorkerName').textContent = data.supportWorker;
          
          // 更新表格內容
          const tbody = document.querySelector('#reportTableBody');
          tbody.innerHTML = '';
          
          questions.forEach((question, index) => {
              const answer = data.answers[index];
              const row = document.createElement('tr');
              row.className = 'hover:bg-gray-50 transition-colors duration-150';
              
              row.innerHTML = `
                  <td class="border-b border-gray-200 px-4 py-3 text-center text-gray-600">${index + 1}</td>
                  <td class="border-b border-gray-200 px-4 py-3 text-left font-medium text-gray-800">${question}</td>
                  <td class="border-b border-gray-200 px-4 py-3">
                      <div class="flex justify-center">
                          <span class="${answer.class} font-semibold">${answer.text}</span>
                      </div>
                  </td>
              `;
              
              tbody.appendChild(row);
          });
      } else {
          // 無資料時的顯示
          document.querySelector('#supportWorkerName').textContent = "無資料";
          document.querySelector('#reportTableBody').innerHTML = `
              <tr>
                  <td colspan="3" class="text-center py-6 text-gray-500 bg-gray-50">
                      No report available for this date
                  </td>
              </tr>
          `;
      }
  }

  // 初始化頁面
  document.addEventListener('DOMContentLoaded', function() {
      document.querySelector('#reportDate').value = '2025-04-14';
      updateReport();
  });

  // 監聽日期和病患選擇的變化
  document.querySelector('#reportDate').addEventListener('change', updateReport);
  document.querySelector('#patientSelect').addEventListener('change', updateReport);
</script>
{% endblock %}