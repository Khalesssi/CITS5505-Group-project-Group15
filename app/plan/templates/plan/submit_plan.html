<!-- Support Plan Submission Form - Allows therapists to create and share support plans -->
<form method="POST" action="{{ url_for('plan.submit_plan') }}">
  <div class="bg-white rounded-lg shadow p-6 transition duration-300 ease-in-out hover:shadow-lg hover:scale-[1.01] max-w-3xl mx-auto">
    <h2 class="text-2xl font-bold mb-6 text-center">Submit Support Plan</h2>

    <!-- Patient and Date Selection Section -->
    <div class="mb-4">
      <!-- Patient dropdown - Populated with patients assigned to the current therapist -->
      <label class="block text-sm font-medium text-gray-700 mb-1">Select Patient</label>
      <select name="patient_id" class="w-full border rounded-md px-3 py-2" required>
        <option value="">-- Select Patient --</option>
        {% for p in patients %}
        <option value="{{ p.id }}">{{ p.name }}</option>
        {% endfor %}
      </select>
      
      <!-- Plan date picker - Allows selecting when the plan should be implemented -->
      <label for="plan_date" class="block text-sm font-medium text-gray-700 mb-1">Plan Date</label>
      <input type="datetime-local" id="plan_date" name="plan_date"
       class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4" required>
    </div>

    <!-- Support Plan Content Section - Main textarea for therapy instructions -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 mb-1">Support Plan Content</label>
      <textarea name="content" rows="8" class="w-full border rounded-md px-3 py-2" placeholder="Write your plan here..." required></textarea>
    </div>

    <!-- Sharing Permissions Section - Controls who can view the plan -->
    <div class="mb-6">
      <span class="block text-sm font-medium text-gray-700 mb-2">Share With:</span>
      <!-- Guardian sharing option -->
      <label class="inline-flex items-center mr-4">
        <input type="checkbox" name="share_guardian" class="mr-2">
        <span>Guardian</span>
      </label>
      <!-- Support Worker sharing option -->
      <label class="inline-flex items-center">
        <input type="checkbox" name="share_sw" class="mr-2">
        <span>Support Worker</span>
      </label>
    </div>

    <!-- Form Submission Section -->
    <div class="text-center">
      <button type="submit" class="bg-indigo-600 text-white px-6 py-2 rounded hover:bg-indigo-700">
        Submit Plan
      </button>
    </div>
  </div>
</form>
